(self.webpackChunkmy_first_angular=self.webpackChunkmy_first_angular||[]).push([[999],{4999:(e,t,i)=>{"use strict";i.r(t),i.d(t,{CrisisCenterModule:()=>A});var s=i(8583),n=i(7930),r=i(5583),o=i(5917),c=i(9193),a=i(5257),l=i(3190),u=i(3018);const d=[{id:1,name:"Dragon Burning Cities"},{id:2,name:"Sky Rains Great White Sharks"},{id:3,name:"Giant Asteroid Heading For Earth"},{id:4,name:"Procrastinators Meeting Delayed Again"}];let p=(()=>{class e{constructor(){this.messages=[]}add(e){this.messages.push(e)}clear(){this.messages=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),h=(()=>{class e{constructor(e){this.messageService=e}getCrisises(){const e=(0,o.of)(d);return this.messageService.add("CrisisService: fetched crises"),e}getCrisis(e){const t=(0,o.of)(d.find(t=>t.id===e));return this.messageService.add("CrisisService: select hero"),t}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(p))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),g=(()=>{class e{constructor(e,t){this.router=e,this.crisisservice=t}resolve(e,t){const i=e.paramMap.get("id");return this.crisisservice.getCrisis(Number(i)).pipe((0,a.q)(1),(0,l.w)(e=>e?(0,o.of)(e):(this.router.navigate(["/route/crisis-center"]),c.E)))}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(n.F0),u.LFG(h))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),m=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-crisis-center-home"]],decls:2,vars:0,template:function(e,t){1&e&&(u.TgZ(0,"p"),u._uU(1,"Welcome to the Crisis Center"),u.qZA())},styles:[""]}),e})(),f=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-crisis-center"]],decls:3,vars:0,template:function(e,t){1&e&&(u.TgZ(0,"h2"),u._uU(1,"CRISIS CENTER"),u.qZA(),u._UZ(2,"router-outlet"))},directives:[n.lC],styles:[""]}),e})();var v=i(3342);let C=(()=>{class e{constructor(){}confirm(e){return(0,o.of)(window.confirm(e||"\u786e\u8ba4\u79bb\u5f00\uff1f"))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function b(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"h2"),u._uU(2),u.ALo(3,"uppercase"),u.qZA(),u.TgZ(4,"div"),u.TgZ(5,"span"),u._uU(6,"id: "),u.qZA(),u._uU(7),u.qZA(),u.TgZ(8,"div"),u.TgZ(9,"label",1),u._uU(10,"crisis name: "),u.qZA(),u.TgZ(11,"input",2,3),u.NdJ("input",function(){u.CHM(e);const t=u.MAs(12);return u.oxw().changeValue(t.value)}),u.qZA(),u.qZA(),u.TgZ(13,"button",4),u.NdJ("click",function(){return u.CHM(e),u.oxw().save()}),u._uU(14,"save"),u.qZA(),u.TgZ(15,"button",4),u.NdJ("click",function(){return u.CHM(e),u.oxw().cancel()}),u._uU(16,"cancel"),u.qZA(),u.qZA()}if(2&e){const e=t.ngIf;u.xp6(2),u.hij("",u.lcZ(3,3,e.name)," Details"),u.xp6(5),u.Oqu(e.id),u.xp6(4),u.Q6J("value",e.name)}}let Z=(()=>{class e{constructor(e,t,i,s){this.activeRoute=e,this.crisisService=t,this.router=i,this.dialogservice=s,this.name="123456",this.editName=void 0}ngOnInit(){this.crisis$=this.activeRoute.data.pipe((0,l.w)(e=>(0,o.of)(e.realCrisis)),(0,v.b)(e=>{null!=this.editName&&e.id==this.id||(this.id=null==e?void 0:e.id,this.editName=null==e?void 0:e.name)}))}changeValue(e){this.editName=e}back(){this.crisis$.subscribe(e=>{this.router.navigate(["route/crisis-center",{selectedId:null==e?void 0:e.id}])})}cancel(){this.gotoCrisis()}gotoCrisis(){this.router.navigate(["/route/crisis-center"])}save(){this.crisis$.subscribe(e=>{e&&this.editName&&(e.name=this.editName,this.gotoCrisis())})}saveName(){this.crisis$.subscribe(e=>{e&&this.editName&&(console.log("savesavesave"),e.name=this.editName)}).unsubscribe()}canDeactivate(){return this.crisis$.pipe((0,l.w)(e=>(null==e?void 0:e.name)==this.editName?(0,o.of)(!0):this.dialogservice.confirm("\u662f\u5426\u4fdd\u5b58\uff1f").pipe((0,v.b)(e=>e&&this.saveName()))))}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.gz),u.Y36(h),u.Y36(n.F0),u.Y36(C))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-crisis-detail"]],decls:2,vars:3,consts:[[4,"ngIf"],["for","crisis-name"],["id","crisis-name","placeholder","name",3,"value","input"],["inp",""],[3,"click"]],template:function(e,t){1&e&&(u.YNc(0,b,17,5,"div",0),u.ALo(1,"async")),2&e&&u.Q6J("ngIf",u.lcZ(1,1,t.crisis$))},directives:[s.O5],pipes:[s.Ov,s.gd],styles:[""]}),e})();var _=i(7238);function w(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",4),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().onSelect(t)}),u.TgZ(1,"span",5),u._uU(2),u.qZA(),u._uU(3),u.qZA()}if(2&e){const e=t.$implicit,i=u.oxw();u.ekj("selected",e.id===i.selectedId),u.xp6(2),u.Oqu(e.id),u.xp6(1),u.hij(" ",e.name," ")}}const y=[{path:"",component:f,children:[{path:"",component:(()=>{class e{constructor(e,t,i,s){this.crisisService=e,this.messageService=t,this.router=i,this.activeRoute=s,this.animation3=!0,this.total=-1,this.isOpen=!0}ngOnInit(){this.getCrisises(),this.activeRoute.paramMap.subscribe(e=>{this.selectedId=Number(e.get("selectedId"))})}showAnimationEvent(e){console.log(e)}search(e){e=e.trim(),this.crisisService.getCrisises().pipe((0,l.w)(t=>{let i=t.filter(t=>t.name.toUpperCase().includes(e.toUpperCase()));return(0,o.of)(i)})).subscribe(e=>{this.crisess$=e,this.total=e.length})}onSelect(e){this.selectedCrisis=e,this.messageService.add(`CrisisesComponent: Selected crisis id=${e.id}`),this.router.navigate(["../crisis-center",e.id],{relativeTo:this.activeRoute})}getCrisises(){this.crisisService.getCrisises().subscribe(e=>{this.crisess$=e,this.total=e.length})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(h),u.Y36(p),u.Y36(n.F0),u.Y36(n.gz))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-crises"]],hostVars:1,hostBindings:function(e,t){2&e&&u.d8E("@animation3",t.animation3)},decls:7,vars:2,consts:[["type","text","placeholder","\u68c0\u7d22\u82f1\u96c4",3,"input"],["inp",""],[1,"heroes"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"click"],[1,"badge"]],template:function(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"h2"),u._uU(1,"\u52a8\u753b\u662f\u5728\u4e00\u4e2a\u53d8\u66f4\u5468\u671f\u5185\u6267\u884c"),u.qZA(),u.TgZ(2,"input",0,1),u.NdJ("input",function(){u.CHM(e);const i=u.MAs(3);return t.search(i.value)}),u.qZA(),u.TgZ(4,"ul",2),u.NdJ("@totalChange.start",function(e){return t.showAnimationEvent(e)})("@totalChange.done",function(e){return t.showAnimationEvent(e)}),u.YNc(5,w,4,4,"li",3),u.qZA(),u._UZ(6,"router-outlet")}2&e&&(u.xp6(4),u.Q6J("@totalChange",t.total),u.xp6(1),u.Q6J("ngForOf",t.crisess$))},directives:[s.sg,n.lC],styles:[".heroes[_ngcontent-%COMP%]{margin:0 0 2em;list-style-type:none;padding:0;width:23em}.heroes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;position:relative;left:0;background-color:#eee;margin:.5em;padding:.3em 0;height:1.6em;border-radius:4px}.heroes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#2c3a41;background-color:#e6e6e6;left:.1em}.heroes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:active{background-color:#525252;color:#fafafa}.heroes[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#000;color:#fff}.heroes[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:hover{background-color:#505050;color:#fff}.heroes[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:active{background-color:#000;color:#fff}.heroes[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#405061;line-height:1em;position:relative;left:-1px;top:-4px;height:1.8em;margin-right:.8em;border-radius:4px 0 0 4px}"],data:{animation:[(0,_.X$)("animation3",[(0,_.eR)(":enter",[(0,_.IO)("li,input",[(0,_.oB)({transform:"translateY(-50px)",opacity:"0"}),(0,_.EY)(30,(0,_.jt)("300ms ease-out",(0,_.oB)({transform:"*",opacity:"*"})))])])]),(0,_.X$)("totalChange",[(0,_.eR)(":increment",[(0,_.IO)(":enter",[(0,_.oB)({width:"0px",opacity:"0"}),(0,_.EY)(30,(0,_.jt)("300ms ease-out",(0,_.oB)({width:"*",opacity:"*"})))],{optional:!0})]),(0,_.eR)(":decrement",[(0,_.IO)(":leave",[(0,_.oB)({width:"*",opacity:"*"}),(0,_.EY)(30,(0,_.jt)("300ms ease-out",(0,_.oB)({width:"0",opacity:"0"})))])])])]}}),e})(),data:{animation:"CrisisList"},children:[{path:":id",component:Z,canDeactivate:[r.a],resolve:{realCrisis:g}},{path:"",component:m}]}]}];let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.Bz.forChild(y)],n.Bz]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.ez,O]]}),e})()}}]);